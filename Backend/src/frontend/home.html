<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GamePage</title>
    <!-- Link to Bootstrap CSS for styling -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <!-- Link to custom CSS for the game -->
    <link rel="stylesheet" href="game.css">
</head>

<body>
    <!-- Main container for the content -->
    <div class="container py5">
        <div class="header">
            <img src="logo.svg" alt="Logo" id="logo">
            <h1 style="font-size: 60px;">Othello ML</h1>
        </div>
        <div class="main">
            <!-- Navigation bar with links and search input -->
            <div class="nav">
                <a href="home.html" id="home">Home</a>
                <a href="game.html" class="button" id="newGameBtn">Game</a>
                <a href="rules.html">Rules</a>
                <input type="text" placeholder="search player" id="search">
            </div>
            <!-- Grey area under navigation bar -->
            <div class="welcome_signup_login">
                <!--Welcoming message-->
                <div class="welcome" style="display: flex; flex-direction: column; padding: 20px;">
                    <p>Othello ML leverages machine learning to enhance the Othello board game experience. It allows you
                        to adjust the AI's difficulty for both learning and playing. You can play against AI or another
                        player, request hints, and explore potential moves in a "what-if" mode. You can also review
                        their past games and track their progress through saved stats in their profiles.</p>
                    <h1 style="text-align: left">Welcome to Othello ML!</h1>
                </div>
                <!--Login/Sign-up-->
                <div class="sign_up">
                    <h1>Start playing</h1>
                    <input type="email" placeholder="Email" id="email" required>
                    <input type="password" placeholder="Enter Password" id="psw" required>
                    <label>
                        <input type="checkbox" name="remember" style="margin-bottom:15px"> Remember me
                    </label>
                    <button type="submit" id="loginbtn">Login</button>
                    Or <button type="submit" id="signupbtn">Sign Up</button>
                </div>
                <!-- </form> -->
            </div>

            <script>
                // This function will handle the sign-in logic
                // It must send JSON to the backend API and redirect the user OR alert them of an error, depending on whether or not the operation succeeded.
                // Alerts will be used for now, but that should change later.  Redirecting should happen once the server environment is ready to use.
                document.addEventListener("click", function (event) {
                    if (!event.target.matches("#loginbtn") && !event.target.matches("#signupbtn")) return;
                    let endpoint = event.target.matches("#loginbtn") ? "login" : "signup";

                    event.preventDefault();

                    let username = document.getElementById("email").value;
                    let password = document.getElementById("psw").value;

                    fetch("http://localhost:8000/othelloml_api/" + endpoint, {
                        method: "POST",
                        credentials: "same-origin",
                        headers: {
                            "Content-Type": "application/json"
                        },
                        body: JSON.stringify({ "username": username, "password": password })
                    }).then((res) => { // This handles the Response object, from which the json must be returned as an object.
                        if (res.status !== 200) {
                            alert("Failed to " + endpoint);
                        }
                        return res.json();
                    }).then(json => {
                        if (json.username) {
                            localStorage.setItem("userData", json);
                            alert("success, this is when you'd get redirected");
                        }
                    });
                });
            </script>

            <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"
                integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL"
                crossorigin="anonymous"></script>

</body>

</html>